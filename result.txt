
[0;34m========== CHECKING NODE ACCESSIBILITY ==========[0m

[0;32m[PASS][0m Node clab-evpn-mh-leaf1 is reachable
[0;32m[PASS][0m Node clab-evpn-mh-leaf2 is reachable
[0;32m[PASS][0m Node clab-evpn-mh-leaf3 is reachable
[0;32m[PASS][0m Node clab-evpn-mh-spine1 is reachable
[0;32m[PASS][0m Node clab-evpn-mh-ce1 is reachable
[0;32m[PASS][0m Node clab-evpn-mh-ce2 is reachable

[0;34m========== CHECKING BGP EVPN CONFIGURATION ON LEAF1 ==========[0m

Checking BGP neighbors on leaf1...
[0;32m[PASS][0m BGP sessions on leaf1 are established
| default              | 10.0.0.2                       | iBGP-overlay         | S      | 100        | established      | 0d:0h:32m:44s    | evpn           | [1/1/1]                        |
| default              | 10.0.0.3                       | iBGP-overlay         | S      | 100        | established      | 0d:0h:32m:44s    | evpn           | [1/1/1]                        |
| default              | 192.168.11.2                   | eBGP-underlay        | S      | 201        | established      | 0d:0h:33m:15s    | ipv4-unicast   | [6/5/2]                        |
+----------------------+--------------------------------+----------------------+--------+------------+------------------+------------------+----------------+--------------------------------+
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--
3 configured neighbors, 3 configured sessions are established, 0 disabled peers
0 dynamic peers
Checking if EVPN address family is enabled on leaf1...
[0;32m[PASS][0m EVPN address family is enabled on leaf1

[0;34m========== CHECKING MAC-VRF CONFIGURATION ON LEAF1 ==========[0m

Checking MAC-VRF network instances on leaf1...
[0;31m[FAIL][0m No MAC-VRF network instances are configured on leaf1

[0;34m========== CHECKING VXLAN INTERFACES ON LEAF1 ==========[0m

Checking VXLAN tunnel interfaces on leaf1...
[0;32m[PASS][0m VXLAN interfaces are configured on leaf1
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Show report for vxlan-tunnels 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
+------------------+-----------------+---------+-------------+------------------+
| Tunnel Interface | VxLAN Interface |  Type   | Ingress VNI | Egress source-ip |
+==================+=================+=========+=============+==================+
| vxlan1           | vxlan1.1        | bridged | 1           | 10.0.0.1/32      |
+------------------+-----------------+---------+-------------+------------------+
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Summary
  1 tunnel-interfaces, 1 vxlan interfaces
  2 vxlan-destinations, 0 unicast, 0 es, 2 multicast, 0 ip
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

[0;34m========== CHECKING EVPN ROUTES ON LEAF1 ==========[0m

Checking for EVPN IMET (Type 3) routes on leaf1...
[0;32m[PASS][0m EVPN IMET routes are present on leaf1
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Show report for the BGP route table of network-instance "default"
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Status codes: u=used, *=valid, >=best, x=stale, b=backup
Origin codes: i=IGP, e=EGP, ?=incomplete
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
BGP Router ID: 10.0.0.1      AS: 101      Local AS: 101
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Type 3 Inclusive Multicast Ethernet Tag Routes
+--------+-----------------------------------------------+------------+---------------------+-----------------------------------------------+--------+-----------------------------------------------+
| Status |              Route-distinguisher              |   Tag-ID   |    Originator-IP    |                   neighbor                    | Path-  |                   Next-Hop                    |
|        |                                               |            |                     |                                               |   id   |                                               |
+========+===============================================+============+=====================+===============================================+========+===============================================+
| u*>    | 10.0.0.2:111                                  | 0          | 10.0.0.2            | 10.0.0.2                                      | 0      | 10.0.0.2                                      |
| u*>    | 10.0.0.3:111                                  | 0          | 10.0.0.3            | 10.0.0.3                                      | 0      | 10.0.0.3                                      |
+--------+-----------------------------------------------+------------+---------------------+-----------------------------------------------+--------+-----------------------------------------------+
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
2 Inclusive Multicast Ethernet Tag routes 2 used, 2 valid
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Checking for EVPN MAC/IP (Type 2) routes on leaf1...
[0;32m[PASS][0m EVPN MAC/IP routes are present on leaf1
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Show report for the BGP route table of network-instance "default"
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Status codes: u=used, *=valid, >=best, x=stale, b=backup
Origin codes: i=IGP, e=EGP, ?=incomplete
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
BGP Router ID: 10.0.0.1      AS: 101      Local AS: 101
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

[0;34m========== CHECKING MAC LEARNING AND VXLAN TUNNELS ==========[0m

Checking MAC table entries in MAC-VRF on leaf1...
[0;31m[FAIL][0m Could not determine MAC-VRF instance name on leaf1
Checking VXLAN tunnels on leaf1...
[0;32m[PASS][0m VXLAN tunnels are established on leaf1
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
Show report for vxlan-tunnels 
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
+--------------+-------------+--------------------------+
| VTEP Address |    Index    |       Last Change        |
+==============+=============+==========================+
| 10.0.0.2     | 75813309118 | 2025-04-03T08:13:14.000Z |
| 10.0.0.3     | 75813309121 | 2025-04-03T08:13:15.000Z |
+--------------+-------------+--------------------------+
2 VXLAN tunnels, 2 active, 0 inactive
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

[0;34m========== CHECKING CONNECTIVITY BETWEEN CE DEVICES ==========[0m

Attempting to ping from CE1 to CE2...
[0;32m[PASS][0m CE1 can successfully ping CE2
PING 192.168.0.2 (192.168.0.2) 56(84) bytes of data.
From 192.168.0.11 icmp_seq=1 Destination Host Unreachable
From 192.168.0.11 icmp_seq=2 Destination Host Unreachable
From 192.168.0.11 icmp_seq=3 Destination Host Unreachable
From 192.168.0.11 icmp_seq=4 Destination Host Unreachable

--- 192.168.0.2 ping statistics ---
4 packets transmitted, 0 received, +4 errors, 100% packet loss, time 3026ms
pipe 2

[0;34m========== VERIFICATION SUMMARY ==========[0m

The EVPN verification script has completed.
Check the results above to ensure that your EVPN configuration is working correctly.
If you see warnings or failures, review the specific areas to troubleshoot.

Key areas to verify:
1. BGP EVPN sessions are established
2. MAC-VRF network instances are properly configured
3. VXLAN interfaces are set up correctly
4. EVPN routes (both IMET and MAC/IP) are being exchanged
5. MAC tables are populated
6. VXLAN tunnels are established
7. End-to-end connectivity between CE devices is working
